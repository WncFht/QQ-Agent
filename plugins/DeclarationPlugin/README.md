# 表白插件 (DeclarationPlugin)

## 简介

表白插件是一个基于NcatBot框架的QQ机器人插件，可以帮助用户生成随机的表白语句。用户只需要指定表白对象，插件就会自动生成一段甜蜜的表白话语。

## 功能特点

1. **随机表白**：生成随机的表白语句
2. **指定对象**：可以指定表白的对象
3. **历史记录**：记录用户的表白历史
4. **群聊和私聊支持**：同时支持群聊和私聊使用

## 使用方法

### 表白命令

向指定对象表白：

```
表白 <对象>
```

示例：
```
表白 世界
```

### 帮助命令

查看表白插件的帮助信息：

```
/declaration_help
```

## 技术实现

插件使用了[SweetNothings API](https://api.lovelive.tools/api/SweetNothings)来获取随机的表白语句。API返回纯文本格式的表白话语。

## 数据存储

插件将用户的表白历史记录存储在`data/declaration_history.json`文件中，格式如下：

```json
[
  {
    "user_id": "用户ID",
    "username": "用户名",
    "group_id": "群ID（私聊为null）",
    "target": "表白对象",
    "content": "表白内容",
    "timestamp": 1647123456.789
  },
  ...
]
```

为了避免文件过大，插件只保留最近100条记录。

## 配置项

插件的配置项包括：

- `history_file`：历史记录文件路径
- `api_url`：表白语句API的URL
- `timeout`：API请求超时时间（秒）

## 依赖项

- httpx：用于发送HTTP请求
- asyncio：用于异步操作

## 注意事项

1. 插件依赖外部API，如果API不可用，将无法生成表白语句
2. 表白语句由API随机生成，内容可能会重复
3. 插件记录的历史数据仅供参考，不会影响插件的正常使用 